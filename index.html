<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stained Glass Website</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #f3f3f3;
    }

    h1 {
      color: black;
    }

    /* Camera feed container with 21:20 aspect ratio */
    .camera-feed {
      position: relative;
      width: 80vmin; /* Relative scaling based on viewport size */
      padding-top: calc(80vmin * (20 / 21)); /* Maintain 21:20 aspect ratio */
      max-width: 100%;
      max-height: 100%;
      background-color: transparent;
      overflow: hidden; /* Ensure no overflow happens outside the container */
    }

    /* Video feed with mask */
    #video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover; /* Ensures the video fills the container without distortion */
      object-position: center center; /* Center the video within the container */
      -webkit-mask-image: url('window1.png'); /* Apply the image as a mask */
      mask-image: url('window1.png'); /* Apply the image as a mask */
      -webkit-mask-size: cover; /* Ensure the mask scales to cover the video */
      mask-size: cover; /* Ensure the mask scales to cover the video */
    }

    .stained-glass-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      opacity: 0.45;
      object-fit: contain;
    }

    .imgB1 {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      object-fit: contain;
    }

    /* Mobile-friendly adjustments using media query */
    @media (max-width: 600px) {
      .camera-feed {
        width: 100vw; /* Ensure container fills the screen width on small devices */
        padding-top: calc(100vw * (20 / 21)); /* Adjust for aspect ratio based on viewport width */
      }
    }

  </style>
  <title>Stained Glass Overlay</title>
</head>
<body>
    <div class="camera-feed">
        <video id="video" autoplay></video>
        <img class="imgA1 stained-glass-overlay" src="window1.png" />
        <img class="imgB1" src="window1frame.png" />
    </div>
    <script>
      // Function to access the user's camera feed
      function startCamera() {
        const video = document.getElementById('video');
        
        // Access the user's camera using getUserMedia
        navigator.mediaDevices.getUserMedia({ video: true })
          .then((stream) => {
            // Attach the video stream to the video element
            video.srcObject = stream;
          })
          .catch((error) => {
            console.error('Error accessing camera:', error);
          });
      }

      // Function to adjust the video size and aspect ratio
      function adjustVideoSize() {
        const video = document.getElementById('video');
        const container = document.querySelector('.camera-feed');

        const containerWidth = container.offsetWidth;
        const containerHeight = container.offsetHeight;

        const imageAspectRatio = 21 / 20; // Set 21:20 aspect ratio

        // Adjust the size of the video based on the aspect ratio
        const videoWidth = containerHeight * imageAspectRatio; // Calculate width based on height to maintain aspect ratio

        if (videoWidth > containerWidth) {
          // If the calculated width is greater than the container width, use the width of the container
          video.style.width = '100%';
          video.style.height = 'auto';
        } else {
          // Otherwise, use the calculated width and set height to 100%
          video.style.width = videoWidth + 'px';
          video.style.height = '100%';
        }

        // Ensure the video is centered in the container
        video.style.left = `${(containerWidth - video.offsetWidth) / 2}px`; // Center horizontally
      }

      // Start the camera feed when the page loads
      window.addEventListener('load', () => {
        startCamera();
        adjustVideoSize();
      });

      // Re-adjust the video size on window resize
      window.addEventListener('resize', adjustVideoSize);
    </script>
</body>
</html>